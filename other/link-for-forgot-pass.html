<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Reset Password | COMSA-NOW</title>
  <meta name="description" content="Reset your COMSA-NOW account password">
  <meta name="keywords" content="COMSA, password reset, account security">

  <!-- Favicons -->
  <link rel="apple-touch-icon" sizes="180x180" href="../assets/img/favicon/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="../assets/img/favicon/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="../assets/img/favicon/favicon-16x16.png">
  <link rel="manifest" href="../assets/img/favicon/site.webmanifest">
  
  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Raleway:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="../assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="../assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="../assets/vendor/aos/aos.css" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="../assets/css/main.css" rel="stylesheet">
  <style>
    .password-reset-section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      padding: 60px 0;
      background-color: #f8f9fa;
    }
    .password-reset-card {
      background: #fff;
      border-radius: 10px;
      box-shadow: 0 5px 25px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      max-width: 600px;
      margin: 0 auto;
    }
    .password-reset-header {
      background-color: #2c4964;
      color: white;
      padding: 20px;
      text-align: center;
    }
    .password-reset-header h2 {
      margin-bottom: 0;
    }
    .password-reset-body {
      padding: 30px;
    }
    .password-strength {
      height: 5px;
      background: #e9ecef;
      margin-top: 5px;
      border-radius: 5px;
      overflow: hidden;
    }
    .password-strength-bar {
      height: 100%;
      width: 0%;
      background: #dc3545;
      transition: all 0.3s ease;
    }
    .password-strength-weak .password-strength-bar {
      width: 30%;
      background: #dc3545;
    }
    .password-strength-medium .password-strength-bar {
      width: 60%;
      background: #fd7e14;
    }
    .password-strength-strong .password-strength-bar {
      width: 100%;
      background: #28a745;
    }
    .password-criteria {
      font-size: 0.85rem;
      color: #6c757d;
      margin-top: 10px;
    }
    .password-criteria i {
      margin-right: 5px;
    }
    .password-criteria .valid {
      color: #28a745;
    }
    .btn-reset-password {
      background-color: #1977cc;
      border-color: #1977cc;
      padding: 10px 30px;
      font-weight: 600;
    }
    .btn-reset-password:hover {
      background-color: #166ab5;
      border-color: #166ab5;
    }
    .token-info {
      font-size: 0.8rem;
      color: #6c757d;
      text-align: center;
      margin-top: 20px;
    }
  </style>
</head>

<body class="index-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">
      <a href="../index.html" class="logo d-flex align-items-center">
        <img src="../assets/img/logo.png" alt="">
        <h1 class="sitename">COMSA-NOW</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="../index.html">Back to Home</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>
    </div>
  </header>

  <main class="main">
    <!-- Password Reset Section -->
    <section class="password-reset-section">
      <div class="container" data-aos="fade-up">
        <div class="password-reset-card">
          <div class="password-reset-header">
            <h2><i class="bi bi-shield-lock"></i> Reset Your Password</h2>
          </div>
          <div class="password-reset-body">
            <form id="passwordResetForm">
              <!-- Hidden token field (would be populated from URL in real implementation) -->
              <input type="hidden" id="resetToken" name="token" value="">
              
              <div class="mb-4">
                <label for="newPassword" class="form-label">New Password</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-key"></i></span>
                  <input type="password" class="form-control" id="newPassword" required>
                  <button class="btn btn-outline-secondary toggle-password" type="button">
                    <i class="bi bi-eye"></i>
                  </button>
                </div>
                <div class="password-strength mt-2">
                  <div class="password-strength">
                    <div class="password-strength-bar" id="passwordStrengthBar"></div>
                  </div>
                  <div class="password-criteria">
                    <p><i class="bi bi-check-circle valid" id="lengthCheck"></i> At least 8 characters</p>
                    <p><i class="bi bi-check-circle" id="numberCheck"></i> Contains a number</p>
                    <p><i class="bi bi-check-circle" id="specialCheck"></i> Contains a special character</p>
                  </div>
                </div>
              </div>
              
              <div class="mb-4">
                <label for="confirmPassword" class="form-label">Confirm New Password</label>
                <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-key-fill"></i></span>
                  <input type="password" class="form-control" id="confirmPassword" required>
                  <button class="btn btn-outline-secondary toggle-password" type="button">
                    <i class="bi bi-eye"></i>
                  </button>
                </div>
                <div class="invalid-feedback" id="passwordMatchError">Passwords do not match</div>
              </div>
              
              <div class="d-grid gap-2">
                <button type="submit" class="btn btn-primary btn-reset-password">
                  <span id="submitText">Reset Password</span>
                  <span id="submitSpinner" class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true"></span>
                </button>
              </div>
            </form>
            
            <div class="token-info">
              <p><i class="bi bi-info-circle"></i> This link will expire in 24 hours or after use</p>
            </div>
          </div>
        </div>
      </div>
    </section><!-- End Password Reset Section -->
  </main>

  <footer id="footer" class="footer dark-background">
    <div class="container">
      <h3 class="sitename">COMSA-NOW</h3>
      <p>Computer Science Student Association</p>
      <div class="social-links d-flex justify-content-center">
        <a href=""><i class="bi bi-facebook"></i></a>
        <a href=""><i class="bi bi-instagram"></i></a>
      </div>
      <div class="container">
        <div class="copyright">
          <span>Copyright</span> <strong class="px-1 sitename">Computer Science Student Association</strong> <span>All Rights Reserved</span>
        </div>
        <div class="credits">
          Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a>
        </div>
      </div>
    </div>
  </footer>

  <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="../assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="../assets/vendor/aos/aos.js"></script>

  <!-- Main JS File -->
  <script src="../assets/js/main.js"></script>
  
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Extract token from URL (in a real implementation)
      const urlParams = new URLSearchParams(window.location.search);
      const token = urlParams.get('token');
      if (token) {
        document.getElementById('resetToken').value = token;
      }

      // Toggle password visibility
      const toggleButtons = document.querySelectorAll('.toggle-password');
      toggleButtons.forEach(button => {
        button.addEventListener('click', function() {
          const input = this.parentNode.querySelector('input');
          const icon = this.querySelector('i');
          if (input.type === 'password') {
            input.type = 'text';
            icon.classList.remove('bi-eye');
            icon.classList.add('bi-eye-slash');
          } else {
            input.type = 'password';
            icon.classList.remove('bi-eye-slash');
            icon.classList.add('bi-eye');
          }
        });
      });

      // Password strength checker
      const newPassword = document.getElementById('newPassword');
      const passwordStrengthBar = document.getElementById('passwordStrengthBar');
      const lengthCheck = document.getElementById('lengthCheck');
      const numberCheck = document.getElementById('numberCheck');
      const specialCheck = document.getElementById('specialCheck');
      
      newPassword.addEventListener('input', function() {
        const password = this.value;
        let strength = 0;
        
        // Check length
        if (password.length >= 8) {
          strength += 1;
          lengthCheck.classList.add('valid');
        } else {
          lengthCheck.classList.remove('valid');
        }
        
        // Check for numbers
        if (/\d/.test(password)) {
          strength += 1;
          numberCheck.classList.add('valid');
        } else {
          numberCheck.classList.remove('valid');
        }
        
        // Check for special characters
        if (/[!@#$%^&*(),.?":{}|<>]/.test(password)) {
          strength += 1;
          specialCheck.classList.add('valid');
        } else {
          specialCheck.classList.remove('valid');
        }
        
        // Update strength bar
        passwordStrengthBar.parentElement.className = 'password-strength';
        if (password.length > 0) {
          if (strength === 1) {
            passwordStrengthBar.parentElement.classList.add('password-strength-weak');
          } else if (strength === 2) {
            passwordStrengthBar.parentElement.classList.add('password-strength-medium');
          } else if (strength === 3) {
            passwordStrengthBar.parentElement.classList.add('password-strength-strong');
          }
        }
      });

      // Confirm password match
      const confirmPassword = document.getElementById('confirmPassword');
      const passwordMatchError = document.getElementById('passwordMatchError');
      
      confirmPassword.addEventListener('input', function() {
        if (this.value !== newPassword.value) {
          this.classList.add('is-invalid');
          passwordMatchError.style.display = 'block';
        } else {
          this.classList.remove('is-invalid');
          passwordMatchError.style.display = 'none';
        }
      });

      // Form submission
      const form = document.getElementById('passwordResetForm');
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        
        // Validate passwords match
        if (newPassword.value !== confirmPassword.value) {
          confirmPassword.classList.add('is-invalid');
          passwordMatchError.style.display = 'block';
          return;
        }
        
        const submitText = document.getElementById('submitText');
        const submitSpinner = document.getElementById('submitSpinner');
        
        // Show loading state
        submitText.textContent = 'Resetting...';
        submitSpinner.classList.remove('d-none');
        
        // Simulate API call (replace with actual AJAX call)
        setTimeout(function() {
          // Hide loading state
          submitText.textContent = 'Password Reset!';
          submitSpinner.classList.add('d-none');
          
          // Show success message
          const successHTML = `
            <div class="alert alert-success mt-3" role="alert">
              <i class="bi bi-check-circle-fill"></i> Your password has been successfully updated. 
              You can now <a href="#" id="loginRedirect">login</a> with your new password.
            </div>
          `;
          
          // Insert success message above the form
          form.insertAdjacentHTML('afterend', successHTML);
          
          // Disable the form after successful submission
          form.querySelector('button[type="submit"]').disabled = true;
          newPassword.disabled = true;
          confirmPassword.disabled = true;
          
          // Add login redirect handler
          document.getElementById('loginRedirect').addEventListener('click', function(e) {
            e.preventDefault();
            // In your implementation, redirect to login or open modal
            console.log('Would redirect to login page');
          });
        }, 1500);
      });
    });
  </script>

</body>

</html>